image:
  file: .gitpod.Dockerfile

tasks:
  - init: |
      # Initialize MySQL database
      sudo service mysql start
      mysql -e "CREATE DATABASE IF NOT EXISTS mydatabase;"
      mysql -e "CREATE USER 'gitpod'@'localhost' IDENTIFIED BY 'password';"
      mysql -e "GRANT ALL PRIVILEGES ON mydatabase.* TO 'gitpod'@'localhost';"
      mysql -e "FLUSH PRIVILEGES;"
    command: |
      # Start MySQL and phpMyAdmin services
      sudo service mysql start
      phpmyadmin

ports:
  - port: 3306
    onOpen: ignore
  - port: 8080
    onOpen: open-preview

vscode:
  extensions:
    - ms-mysql.mysql

